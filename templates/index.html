<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Upload File - Data Profiler</title>
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
		/>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<!-- ✅ Add jQuery -->
	</head>
	<body class="bg-light">
		<div class="container mt-4">
			<!-- ✅ Flash Messages Section -->
			{% with messages = get_flashed_messages(with_categories=True) %} {% if
			messages %} {% for category, message in messages %}
			<div
				class="alert alert-{{ category }} alert-dismissible fade show flash-message"
				role="alert"
			>
				{{ message }}
				<button
					type="button"
					class="btn-close"
					data-bs-dismiss="alert"
					aria-label="Close"
				></button>
			</div>
			{% endfor %} {% endif %} {% endwith %}

			<div class="card shadow p-4 mt-3">
				<h2 class="text-center text-primary">Upload File for Analysis</h2>

				<form action="/" method="POST" enctype="multipart/form-data">
					<div class="mb-3">
						<input type="file" class="form-control" name="file" required />
					</div>
					<button type="submit" class="btn btn-success w-100">
						Upload & Generate Report
					</button>
				</form>

				<hr />

				<div class="text-center">
					<a
						href="{{ url_for('download_report') }}"
						class="btn btn-primary mt-3"
						>Download Report</a
					>
				</div>
			</div>
		</div>

		<!-- ✅ Bootstrap & Flash Message Auto-Dismiss Script -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
		<script>
			$(document).ready(function () {
				// Auto-dismiss flash messages after 5 seconds
				setTimeout(function () {
					$(".flash-message").fadeOut(500, function () {
						$(this).remove();
					});
				}, 5000);
			});
		</script>
	</body>
</html>
